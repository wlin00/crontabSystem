{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/\\u6BD5\\u8BBE/\\u6BD5\\u8BBE/src/component/laout/Navbar.js\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, NavLink } from 'react-router-dom'; //用于链接跳转路由，替换a标签，不会造成页面刷新，并且可以缓存数据\n\nimport { Menu, Dropdown, Icon, message, Popconfirm } from 'antd';\nimport axios from 'axios';\n\nconst Navbar = props => {\n  const title = props.title;\n  let name = localStorage.getItem('name');\n  let login = localStorage.getItem('login');\n  let mess = login ? name.split('@')[0] + '，欢迎' : '请登陆';\n  useEffect(() => {\n    //useEffect 重构生命周期didMount -- 记住用户的登陆\n    let name = localStorage.getItem('name');\n    let login = localStorage.getItem('login');\n    console.log(name, login);\n\n    if (!login) {\n      message.info('请您先登陆！');\n      setTimeout(() => {\n        // props.history.push({ pathname: '/' })\n        window.location.href = '/';\n      }, 1000);\n    } // eslint-disable-next-line\n\n  }, []);\n\n  const logOut = () => {\n    //摧毁sessionId\n    axios.post('user/logOut', {}).then(data => {\n      console.log(data, login);\n\n      if (data.status === 200) {\n        if (data.data.err === 0) {\n          //注销成功\n          message.info('用户注销成功！');\n          localStorage.removeItem('name'); //删除本地缓存\n\n          localStorage.removeItem('login');\n          setTimeout(() => {\n            // props.history.push({ pathname: '/' })\n            window.location.href = '/';\n          }, 1000);\n        } else {\n          message.info('用户注销失败，请重试！');\n          return false;\n        }\n      }\n    });\n  };\n\n  const cancel = () => {\n    message.info('已取消注销');\n  };\n\n  const menu = React.createElement(Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, login && React.createElement(Popconfirm, {\n    title: \"\\u9000\\u51FA\\u767B\\u9646\" // width={100}\n    ,\n    style: {\n      width: '1000px'\n    },\n    onConfirm: logOut,\n    onCancel: cancel,\n    okText: \"Yes\",\n    cancelText: \"No\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"\\u9000\\u51FA\\u767B\\u9646\")), !login && React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"\\u8BF7\\u60A8\\u767B\\u9646\")));\n  return React.createElement(\"nav\", {\n    className: \"navbar App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"nav-color\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, title), React.createElement(\"ul\", {\n    className: \"nav_ul\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    className: \"link\",\n    activeClassName: \"nav_active\",\n    to: \"/index\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"\\u529F\\u80FD\\u4E2D\\u5FC3\")), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    className: \"link\",\n    activeClassName: \"nav_active\",\n    to: \"/notice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"\\u4EFB\\u52A1\\u53D1\\u5E03\")), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    className: \"link\",\n    activeClassName: \"nav_active\",\n    to: \"/monitor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"\\u4EFB\\u52A1\\u76D1\\u63A7\")), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    className: \"link\",\n    activeClassName: \"nav_active\",\n    to: \"/people\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"\\u7BA1\\u7406\\u4E2D\\u5FC3\"))), React.createElement(\"ul\", {\n    className: \"nav_ul2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Dropdown, {\n    overlay: menu,\n    className: \"dropDown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"link\",\n    style: {\n      fontSize: '21px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, mess, React.createElement(Icon, {\n    className: \"navIcon\",\n    spin: true,\n    style: {\n      fontWeight: 'bolder',\n      fontSize: '25px',\n      position: 'relative',\n      top: '2px'\n    },\n    type: \"down\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })))));\n};\n\nNavbar.defaultProps = {\n  //设置默认值\n  title: '西华毕设'\n};\nNavbar.propTypes = {\n  title: PropTypes.string.isRequired\n};\nexport default Navbar;","map":{"version":3,"sources":["/Users/mac/Desktop/毕设/毕设/src/component/laout/Navbar.js"],"names":["React","useEffect","PropTypes","Link","NavLink","Menu","Dropdown","Icon","message","Popconfirm","axios","Navbar","props","title","name","localStorage","getItem","login","mess","split","console","log","info","setTimeout","window","location","href","logOut","post","then","data","status","err","removeItem","cancel","menu","width","fontSize","fontWeight","position","top","defaultProps","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link, NavLink } from 'react-router-dom'  //用于链接跳转路由，替换a标签，不会造成页面刷新，并且可以缓存数据\nimport { Menu, Dropdown, Icon, message, Popconfirm } from 'antd'\nimport axios from 'axios'\n\nconst Navbar = (props) => {\n    const { title } = props\n    let name = localStorage.getItem('name')\n    let login = localStorage.getItem('login')\n    let mess = login ? name.split('@')[0] + '，欢迎' : '请登陆'\n\n    useEffect(() => {  //useEffect 重构生命周期didMount -- 记住用户的登陆\n        let name = localStorage.getItem('name')\n        let login = localStorage.getItem('login')\n        console.log(name, login)\n        if (!login) {\n            message.info('请您先登陆！');\n            setTimeout(() => {\n                // props.history.push({ pathname: '/' })\n                window.location.href = '/'\n            }, 1000)\n        }\n        // eslint-disable-next-line\n    }, [])\n\n    const logOut = () => { //摧毁sessionId\n        axios.post('user/logOut', {}).then((data) => {\n            console.log(data, login)\n            if (data.status === 200) {\n                if (data.data.err === 0) {\n                    //注销成功\n                    message.info('用户注销成功！');\n                    localStorage.removeItem('name') //删除本地缓存\n                    localStorage.removeItem('login')\n                    setTimeout(() => {\n                        // props.history.push({ pathname: '/' })\n                        window.location.href = '/'\n                    }, 1000)\n\n                } else {\n                    message.info('用户注销失败，请重试！');\n                    return false\n                }\n            }\n        })\n    }\n\n    const cancel = () => {\n        message.info('已取消注销')\n    }\n\n    const menu = (\n        <Menu>\n            <Menu.Item>\n\n                {login &&\n                    <Popconfirm\n                        title=\"退出登陆\"\n                        // width={100}\n                        style={{ width: '1000px' }}\n                        onConfirm={logOut}\n                        onCancel={cancel}\n                        okText=\"Yes\"\n                        cancelText=\"No\"\n                    >\n                        <span href=\"#\">退出登陆</span>\n                    </Popconfirm>\n                }\n\n                {!login && <Link to=\"/\">\n                    请您登陆\n                </Link>}\n            </Menu.Item>\n        </Menu>\n    );\n\n    return (\n        <nav className=\"navbar App-header\">\n            <div className='nav-color'>\n                {title}\n            </div>\n            <ul className=\"nav_ul\">\n                <li><NavLink className=\"link\" activeClassName=\"nav_active\" to=\"/index\">功能中心</NavLink></li>\n                <li><NavLink className=\"link\" activeClassName=\"nav_active\" to=\"/notice\">任务发布</NavLink></li>\n                <li><NavLink className=\"link\" activeClassName=\"nav_active\" to=\"/monitor\">任务监控</NavLink></li>\n                <li><NavLink className=\"link\" activeClassName=\"nav_active\" to=\"/people\">管理中心</NavLink></li>\n            </ul>\n            <ul className='nav_ul2'>\n                <Dropdown overlay={menu} className='dropDown'>\n                    {/* // eslint-disable-next-line  */}\n                    <li className=\"link\"\n                        style={{ fontSize: '21px' }}\n                    >\n                        {mess}\n                        <Icon className='navIcon'\n                            spin\n                            style={{\n                                fontWeight: 'bolder', fontSize: '25px'\n                                , position: 'relative', top: '2px'\n                            }}\n                            type=\"down\" />\n                    </li>\n                </Dropdown>\n            </ul>\n        </nav>\n    )\n}\n\nNavbar.defaultProps = {  //设置默认值\n    title: '西华毕设',\n};\n\nNavbar.propTypes = {\n    title: PropTypes.string.isRequired,\n};\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}