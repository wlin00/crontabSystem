{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Desktop/\\u6BD5\\u8BBE/\\u6BD5\\u8BBE/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/\\u6BD5\\u8BBE/\\u6BD5\\u8BBE/src/component/pages/frontend/Monitor/HostDetail/HostDetail.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Typography, Input, Table, Tag, Button } from 'antd';\nimport MonitorContext from '../../../../../context/monitor/monitorContext';\nimport Spinner from '../../../../laout/Spinner';\nimport { Link, NavLink, Route } from 'react-router-dom';\nimport MonitorDetail from '../HostDetail/MonitorDetail/MonitorDetail';\nimport Trigger from '../HostDetail/Trigger/Trigger';\nimport '../HostDetail/HostDetail.scss';\n\nconst HostDetail = props => {\n  //页面挂载成功，useContext拉取远端数据\n  const monitorContext = useContext(MonitorContext);\n  const getMonitorDetail = monitorContext.getMonitorDetail,\n        clearId = monitorContext.clearId,\n        monitor = monitorContext.monitor,\n        loading = monitorContext.loading,\n        total = monitorContext.total,\n        detail = monitorContext.detail,\n        currentId = monitorContext.currentId,\n        setId = monitorContext.setId;\n\n  let _id; //存放当前请求的主机id，首选从redux里拿\n\n\n  if (currentId) {\n    _id = Number(currentId);\n  } else {\n    _id = Number(props.location.query.id); // _id=3\n  }\n\n  console.log('currentId', currentId, typeof currentId);\n  useEffect(() => {\n    //useEffect 重构生命周期didMount\n    getMonitorDetail(_id);\n    return handleComponentWillUnmount; // eslint-disable-next-line\n  }, []);\n\n  const handleComponentWillUnmount = () => {\n    clearId();\n  };\n\n  console.log(detail);\n  console.log(_id, typeof _id); // console.log('monitor', monitor,total)\n  // console.log('currentList:',current)\n\n  const Text = Typography.Text;\n  const Search = Input.Search; //分页\n\n  const _useState = useState(1),\n        _useState2 = _slicedToArray(_useState, 2),\n        currentPage = _useState2[0],\n        setCurrentPage = _useState2[1];\n\n  const paginationProps = {\n    showSizeChanger: false,\n    showQuickJumper: false,\n    showTotal: () => \"\\u5171\".concat(total, \"\\u6761\"),\n    pageSize: 5,\n    current: currentPage,\n    total: total,\n    onShowSizeChange: (current, pageSize) => changePageSize(pageSize, current),\n    onChange: current => changePage(current)\n  };\n\n  const changePageSize = (a, b) => {\n    console.log(a, b);\n  };\n\n  const changePage = v => {\n    console.log(v);\n    setCurrentPage(v);\n  }; // const paginationProps = {\n  //     showSizeChanger: true,\n  //     showQuickJumper: false,\n  //     showTotal: () => `共${totals}条`,\n  //     pageSize: this.state.pageSize,\n  //     current: page.pageNum,\n  //     total: page.total,\n  //     onShowSizeChange: (current, pageSize) => this.changePageSize(pageSize, current),\n  //     onChange: (current) => this.changePage(current),\n  // }\n  // key: item.id?item.id:String(index+1),\n  // name: item.name?item.name:'暂无',\n  // ip_addr: item.command?item.command:'暂无',\n  // statu: item.cronExpr?item.cronExpr:'暂无',\n  // uptime: item.cronExpr?item.cronExpr:'暂无',\n  // total_services: item.cronExpr?item.cronExpr:'暂无',\n  // last_update: item.cronExpr?item.cronExpr:'暂无',\n\n\n  const columns = [{\n    title: '主机',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record, index) => React.createElement(Link, {\n      to: \"/monitor/\".concat(index),\n      style: {\n        color: '#337AB7'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, text)\n  }, {\n    title: 'Ip地址',\n    dataIndex: 'ip_addr',\n    key: 'ip_addr'\n  }, {\n    title: '状态',\n    dataIndex: 'statu',\n    key: 'statu'\n  }, {\n    title: '上传时间',\n    dataIndex: 'uptime',\n    key: 'uptime'\n  }, {\n    title: '总服务',\n    dataIndex: 'total_services',\n    key: 'total_services'\n  }, {\n    title: '最后更新',\n    dataIndex: 'last_update',\n    key: 'last_update'\n  }, {\n    title: '操作',\n    key: 'action',\n    render: (text, record) => React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"redLink\",\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u5220\\u9664\"))\n  }];\n  const data = []; // 初始化antd表格\n  // if (allUser.length !== undefined) {\n  //     allUser.forEach((item, index) => {\n  //         data.push({\n  //             key: String(index + 1),\n  //             name: item.name ? item.name : '未填写',\n  //             phone: item.phone ? item.phone : '未填写',\n  //             mail: item.mail ? item.mail : (item.us ? item.us : '未填写'),\n  //             tags: item.right === 0 ? ['普通用户'] : ['管理员']\n  //         })\n  //     })\n  // }\n\n  if (monitor.length !== undefined) {\n    monitor.forEach((item, index) => {\n      data.push({\n        key: item.id ? item.id : String(index + 1),\n        name: item.name ? item.name : '暂无',\n        ip_addr: item.ip_addr ? item.ip_addr : '暂无',\n        statu: item.statu ? item.statu : '暂无',\n        uptime: item.uptime ? item.uptime : '暂无',\n        total_services: item.total_services ? item.total_services : '暂无',\n        last_update: item.last_update ? item.last_update : '暂无' // oknum: item.cronExpr?item.cronExpr:'暂无',\n\n      });\n    });\n  }\n\n  if (loading) {\n    return React.createElement(Spinner, {\n      style: {\n        width: '300px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Host\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"navText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(Text, {\n    strong: true,\n    style: {\n      color: '#ff0000'\n    },\n    className: \"navFont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"\\u5DF2\\u76D1\\u63A7\\u4E3B\\u673A\\u5217\\u8868\\u8BE6\\u60C5\"), React.createElement(Link, {\n    to: \"/monitor\",\n    className: \"HostDetail-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"HostDetail-btn\",\n    type: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"\\u8FD4\\u56DE\"))), React.createElement(\"ul\", {\n    className: \"HostDetail-ul\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"HostDetail-ul__li\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    exact: true,\n    activeClassName: \"HostDetail-ul__li--active\",\n    className: \"HostDetail-ul__li--link\",\n    to: \"/monitor/monitorDetail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \"\\u8D8B\\u52BF\\u56FE\\u8868\")), React.createElement(\"li\", {\n    className: \"HostDetail-ul__li\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    exact: true,\n    activeClassName: \"HostDetail-ul__li--active\",\n    className: \"HostDetail-ul__li--link\",\n    to: \"/monitor/monitorDetail/trigger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, \"\\u89E6\\u53D1\\u4E8B\\u4EF6\"))), React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/monitor/monitorDetail\",\n    exact: true,\n    component: MonitorDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/monitor/monitorDetail/trigger\",\n    component: Trigger,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  })));\n};\n\nexport default HostDetail;","map":{"version":3,"sources":["/Users/mac/Desktop/毕设/毕设/src/component/pages/frontend/Monitor/HostDetail/HostDetail.js"],"names":["React","useState","useContext","useEffect","Typography","Input","Table","Tag","Button","MonitorContext","Spinner","Link","NavLink","Route","MonitorDetail","Trigger","HostDetail","props","monitorContext","getMonitorDetail","clearId","monitor","loading","total","detail","currentId","setId","_id","Number","location","query","id","console","log","handleComponentWillUnmount","Text","Search","currentPage","setCurrentPage","paginationProps","showSizeChanger","showQuickJumper","showTotal","pageSize","current","onShowSizeChange","changePageSize","onChange","changePage","a","b","v","columns","title","dataIndex","key","render","text","record","index","color","data","length","undefined","forEach","item","push","String","name","ip_addr","statu","uptime","total_services","last_update","width"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { Typography, Input, Table, Tag, Button } from 'antd'\nimport MonitorContext from '../../../../../context/monitor/monitorContext'\nimport Spinner from '../../../../laout/Spinner'\nimport { Link, NavLink, Route} from 'react-router-dom'\n\nimport MonitorDetail from '../HostDetail/MonitorDetail/MonitorDetail'\nimport Trigger from '../HostDetail/Trigger/Trigger'\n\nimport '../HostDetail/HostDetail.scss'\n\n\n\nconst HostDetail = (props) => {\n    //页面挂载成功，useContext拉取远端数据\n    const monitorContext = useContext(MonitorContext)\n    const { getMonitorDetail, clearId, monitor, loading, total, detail, currentId,setId } = monitorContext\n\n    let _id; //存放当前请求的主机id，首选从redux里拿\n    if (currentId) {\n        _id = Number(currentId)\n    } else {\n        _id = Number(props.location.query.id) \n        // _id=3\n    }\n    console.log('currentId',currentId,typeof currentId)\n\n    useEffect(() => {  //useEffect 重构生命周期didMount\n            getMonitorDetail(_id)\n        return handleComponentWillUnmount\n\n        // eslint-disable-next-line\n    }, [])\n\n    const handleComponentWillUnmount = () => {\n        clearId()\n    }\n\n    console.log(detail)\n    console.log(_id,typeof _id)\n\n    // console.log('monitor', monitor,total)\n    // console.log('currentList:',current)\n\n\n    const { Text } = Typography\n    const { Search } = Input\n\n    //分页\n    const [currentPage, setCurrentPage] = useState(1)\n    const paginationProps = {\n        showSizeChanger: false,\n        showQuickJumper: false,\n        showTotal: () => `共${total}条`,\n        pageSize: 5,\n        current: currentPage,\n        total: total,\n        onShowSizeChange: (current, pageSize) => changePageSize(pageSize, current),\n        onChange: (current) => changePage(current),\n    }\n\n    const changePageSize = (a, b) => {\n        console.log(a, b)\n    }\n\n    const changePage = (v) => {\n        console.log(v)\n        setCurrentPage(v)\n    }\n\n    // const paginationProps = {\n    //     showSizeChanger: true,\n    //     showQuickJumper: false,\n    //     showTotal: () => `共${totals}条`,\n    //     pageSize: this.state.pageSize,\n    //     current: page.pageNum,\n    //     total: page.total,\n    //     onShowSizeChange: (current, pageSize) => this.changePageSize(pageSize, current),\n    //     onChange: (current) => this.changePage(current),\n    // }\n\n\n\n    // key: item.id?item.id:String(index+1),\n    // name: item.name?item.name:'暂无',\n    // ip_addr: item.command?item.command:'暂无',\n    // statu: item.cronExpr?item.cronExpr:'暂无',\n    // uptime: item.cronExpr?item.cronExpr:'暂无',\n    // total_services: item.cronExpr?item.cronExpr:'暂无',\n    // last_update: item.cronExpr?item.cronExpr:'暂无',\n\n\n    const columns = [\n        {\n            title: '主机',\n            dataIndex: 'name',\n            key: 'name',\n            render: (text, record, index) => <Link to={`/monitor/${index}`} style={{ color: '#337AB7' }}>{text}</Link>,\n        },\n        {\n            title: 'Ip地址',\n            dataIndex: 'ip_addr',\n            key: 'ip_addr',\n        },\n        {\n            title: '状态',\n            dataIndex: 'statu',\n            key: 'statu',\n        },\n        {\n            title: '上传时间',\n            dataIndex: 'uptime',\n            key: 'uptime',\n        },\n        {\n            title: '总服务',\n            dataIndex: 'total_services',\n            key: 'total_services',\n        },\n        {\n            title: '最后更新',\n            dataIndex: 'last_update',\n            key: 'last_update',\n        },\n\n\n        {\n            title: '操作',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                    <span className='redLink' style={{ color: 'red' }}>删除</span>\n                </span>\n            ),\n        },\n    ];\n\n    const data = []; // 初始化antd表格\n    // if (allUser.length !== undefined) {\n    //     allUser.forEach((item, index) => {\n    //         data.push({\n    //             key: String(index + 1),\n    //             name: item.name ? item.name : '未填写',\n    //             phone: item.phone ? item.phone : '未填写',\n    //             mail: item.mail ? item.mail : (item.us ? item.us : '未填写'),\n    //             tags: item.right === 0 ? ['普通用户'] : ['管理员']\n    //         })\n\n    //     })\n    // }\n\n    if (monitor.length !== undefined) {\n        monitor.forEach((item, index) => {\n            data.push({\n                key: item.id ? item.id : String(index + 1),\n                name: item.name ? item.name : '暂无',\n                ip_addr: item.ip_addr ? item.ip_addr : '暂无',\n                statu: item.statu ? item.statu : '暂无',\n                uptime: item.uptime ? item.uptime : '暂无',\n                total_services: item.total_services ? item.total_services : '暂无',\n                last_update: item.last_update ? item.last_update : '暂无',\n                // oknum: item.cronExpr?item.cronExpr:'暂无',\n\n            })\n\n        })\n    }\n\n\n    if (loading) { return (<Spinner style={{ width: '300px' }}></Spinner>) }\n    return (\n        <div className='Host'>\n            <div className='navText'>\n                <Text strong style={{ color: '#ff0000' }} className='navFont'>已监控主机列表详情</Text>\n                <Link to='/monitor' className='HostDetail-link' ><Button className='HostDetail-btn' type='danger'>返回</Button></Link>\n            </div>\n\n            {/* <div className='Host-table' style={{ marginBottom: '10px' }}>\n                <Table columns={columns} dataSource={data} pagination={paginationProps} />\n            </div> */}\n\n            <ul className='HostDetail-ul'>\n                <li className='HostDetail-ul__li'><NavLink exact activeClassName=\"HostDetail-ul__li--active\" className='HostDetail-ul__li--link' to='/monitor/monitorDetail'>趋势图表</NavLink></li>\n                <li className='HostDetail-ul__li'><NavLink exact activeClassName=\"HostDetail-ul__li--active\" className='HostDetail-ul__li--link' to='/monitor/monitorDetail/trigger'>触发事件</NavLink></li>\n            </ul>\n\n            <div style={{ width: '100%', }}>\n                <Route path='/monitor/monitorDetail' exact component={MonitorDetail} />\n                <Route path=\"/monitor/monitorDetail/trigger\" component={Trigger} />\n\n            </div>\n        </div>\n    )\n}\n\nexport default HostDetail\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}